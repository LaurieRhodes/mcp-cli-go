# Document Summarization Template
# Demonstrates: Extract-transform-load pattern, multi-step processing

name: summarize
description: Multi-step document summarization
version: 1.0.0
author: MCP-CLI Team
tags: [summarization, documents, extraction]

config:
  defaults:
    provider: anthropic
    model: claude-sonnet-4
    temperature: 0.5

steps:
  # Step 1: Extract Key Points
  - name: extract_key_points
    prompt: |
      Extract the key points from this document:
      
      {{stdin}}
      
      Focus on:
      - Main arguments
      - Important facts
      - Key conclusions
      - Supporting evidence
      
      Return as a structured list.
    output: key_points
  
  # Step 2: Categorize Points
  - name: categorize
    prompt: |
      Categorize these key points by topic:
      
      {{key_points}}
      
      Group related points together.
      Identify 3-5 main themes.
      
      Format:
      Topic 1: [topic name]
      - Point 1
      - Point 2
      
      Topic 2: [topic name]
      - Point 1
      - Point 2
    output: categorized_points
  
  # Step 3: Create Summary
  - name: create_summary
    prompt: |
      Create a concise summary from these categorized points:
      
      {{categorized_points}}
      
      {% if input_data.length %}
      Target length: {{input_data.length}} words
      {% else %}
      Target length: 200 words
      {% endif %}
      
      Include:
      - Opening statement (main idea)
      - Key themes (2-3 sentences each)
      - Conclusion (1-2 sentences)
      
      Style: {{input_data.style | default: "professional"}}
    output: summary

# Usage:
# 
# Basic:
# cat document.txt | mcp-cli --template summarize
#
# With options:
# mcp-cli --template summarize \
#   --input-file document.txt \
#   --input-data '{"length": 300, "style": "casual"}'
#
# Output: A well-structured summary
