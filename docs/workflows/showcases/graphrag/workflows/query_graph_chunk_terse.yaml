$schema: "workflow/v2.0"
name: query_graph_chunk_terse
version: 1.0.0
description: Ultra-directive context synthesis - NO EXPLANATIONS

execution:
  provider: deepseek
  model: deepseek-chat
  timeout: 2m

steps:
  - name: synthesize
    skills: [python-context-builder]
    max_iterations: 5
    run: |
      Input: {{input}}
      
      CRITICAL: DO NOT EXPLAIN. JUST EXECUTE TOOLS IN SEQUENCE.
      
      Step 1: Query graph
      skills_run_helper_script(
        skill_name="python-context-builder",
        script_name="query_knowledge_graph.py",
        args=["/outputs/rlm_poc/knowledge_graph.json", "/outputs/rlm_poc/graph_chunks/entities_{{chunk_id}}.json", "/outputs/rlm_poc/graph_contexts/context_{{chunk_id}}_graph.json", "2"]
      )
      
      Step 2: Extract from content: summary, concepts, relationships
      
      Step 3: Save context
      skills_run_helper_script(
        skill_name="python-context-builder",
        script_name="save_context.py",
        args=["{{chunk_id}}", "summary_text", "concept1|concept2", "relationships_text"]
      )
      
      Reply ONLY: "Done"
